# PHP

## Основы

[Основы стандарта](https://www.php-fig.org/psr/psr-1/)

[Code-style](https://www.php-fig.org/psr/psr-12/)

### Комментарии

`//` однострочный комментарий

```php
/*
* Многострочный комментарий
*/
```



### Синтаксические ошибки

Возникают в случае, если код был написан с нарушением грамматических правил языка. Например был забыл `;` отвечающий за конец инструкции.

### Арифметические операции

```php
+ - сложение
* — умножение
/ — деление
- — вычитание
% — остаток от деления
** — возведение в степень
```

Всегда отбивайте арифметические операторы пробелами от самих чисел (операндов) – это хороший стиль программирования.

### Линтер

Код нужно оформлять определенным образом. Специальный набор правил - стандарты- описывают различные аспекты написания кода. Конкретно для PHP - PSR.  

В любом языке программирования существуют специальные инструменты, так называемые **линтеры**.

Для PHP это - [PHP_CodeSniffer](https://github.com/squizlabs/PHP_CodeSniffer)

Он проверяет файл на соответствие стандарту.

Команда: 

`phpcs --standard=PSR12 /path/to/file`

Покажет ошибки и предложит их исправить в автоматическом режиме

Команда: `phpcbf --standard=PSR12 /path/to/file`

Попытается исправить ошибки

### Слабая типизация

PHP - язык со **слабой типизацией**. Он знает о существовании разных типов данных, но относится к ним не очень строго, пытаясь преобразовывать информацию, когда это кажется разумным.

В языках со **строгой типизацией** сложить число со строкой не получится.

### [Именование](https://ru.hexlet.io/blog/posts/naming-in-programming) << тут статья

#### [Нотации](https://ru.hexlet.io/blog/posts/naming-in-programming)

В PHP используется CamelCase и его вариация lowerCamelCase, при котором первая буква первого слова — строчная. Именно lowerCamelCase применяется для переменных.

## Константы

[Список встроенных констант](https://www.php.net/manual/ru/reserved.constants.php)

### Магические константы

Кроме обычных констант, в PHP существует отдельная группа — **магические константы**. Их отличия заключаются в следующем:

- Магические константы невозможно определить самому, можно пользоваться только существующими.
- Магические константы начинаются и заканчиваются символами `__` (два подчёркивания).
- Магия заключается в том, что такие константы имеют одно и то же значение только в пределах определенной части программы.

Последний пункт может показаться странным. Какие же они константы, если их значение меняется? Прямо скажем, они не очень постоянные, но их изменения четко регламентированы и на практике не вызывают проблем. К подобным константам относятся, например, такие:

- `__LINE__` — содержит текущую строку файла, в котором она используется
- `__FILE__` — путь до текущего файла
- `__DIR__` — путь до директории, в которой находится текущий файл

[Магические константы](https://php.net/manual/ru/language.constants.predefined.php)

## [Стандартный справочник функций PHP](https://www.php.net/manual/ru/funcref.php) 

## Отладка

### Типы ошибок

PHP Parse error: ... - синтаксические ошибки

PHP Notice  и PHP Warning - Предупреждение(программа продолжит работу), но по хорошему, нужно поправить.



## Composer

Для подключения дополнительной функциональности используется менеджер зависимостей [Composer](https://getcomposer.org)

### Namespaces

Начиная с версии 5.3 в PHP появился механизм пространства имен, в задачу которого входит изоляция кода разнфх файлов друг от друга.

```php
<?php

namespace App; // теперь имеем доступ по App\Foo

class Foo
{
    public function bar()
    {
        // do somefing
    }
}
```

Вызов по пространству имен выглядит как `\<имя пространства имён>\<имя класса/функции>`

[Официальная дока по Namespaces](https://www.php.net/manual/ru/language.namespaces.rationale.php)

Файловая структура практически любого проекта на `php` выглядит следующим образом:

```
src/
tests/
composer.json
composer.lock
.git
README.md
```

`src/` - предназначена для хранения исходного кода. Ее структура НЕ плоская. - внутри `src` могут находиться другие дирректории с файлами внутри.

```
my-site/
	src/
		/Formatters/
			Pretty.php
		Generator.php	
```

Чтобы отобразить данную структуру, можно использовать вложенные пространства имен:

```php
namespace Formatters\Pretty;
```

и

```php
namespace Generator
```

Но есть проблема. Дело в том, что теперь сами пространства имен становятся уникальными и не должны пересекаться. А пространство с именем `Generator` может встретиться в других бибилиотеках.

Поэтому принято выбирать Namespace по имени папки, в которой лежит `src`

```php
namespace MySite\Formatters\Pretty;
```

```php
namespace MySite\Generator;
```

### Импортирование функций

Чтобы не таскать за собой все пространство имен, необходимые функции можно импортировать

```php
<?php

namespace PhpPairs\Lists;

use function PhpPairs\Pairs\cons;
use function PhpPairs\Pairs\car;
use function PhpPairs\Pairs\cdr;
use function PhpPairs\Pairs\toString;
```

### Алиасы в Namespace

```php
<?php

namespace Generator;

use function Formatters\Pretty\render;
use function Formatters\Simple\render as simpleRender;

function generate($data)
{
    return simpleRender($data);
}
```

Если функции из разных пакетом имеют одинаковое название, то необходимо использовать алиас, он задается с помощью слова `as`

## Объявление типа аргумента (Type Hinting)

Для того, чтобы показать, какой тип аргумента должен быть у функции используется **Type Hinting**

```php
function foo(string $string)
```

При несоответствии типа аргумента, будет получен **Type Error**

С версии 7.2 появилось возможность указать возвращаемый тип данных

```php
function bar(int $num): int
// ждем от функции возвращения целочисленного значения
```

При несоответствии типа возвращаемого значения, будет получен **Type Error**

[Официальная документация](https://www.php.net/manual/ru/functions.arguments.php#functions.arguments.type-declaration)

### Composer ([документация](https://getcomposer.org/doc/))



### PHP Массивы

Массивы в памяти компьютера

Агрегацией являются любые вычисления, которые строятся на основе всего набора данных, например, поиск максимального, среднего, суммы и так далее.



Если массив пустой, то возвращаем `null`. Это классический пример использования идиомы [guard expression (охраняющее выражение)](https://ru.wikipedia.org/wiki/Охрана_(программирование)). Её идея в том, что в начале функции проверяются самые простые условия, для которых нужно минимум вычислений. При таком подходе основной код находится на верхнем уровне, а не размещён внутри условной конструкции. Такой код легче читать и у него меньше вложенность.

####  [Охраняющее выражение](https://ru.wikipedia.org/wiki/Охрана_(программирование))



# PHP: Функции

Детерменированность - отсутствие побочных эффектов, предсказуемость.

Детерменированность функций - предсказуемость работы функции. 

В общем случае следует избегать внешних данных, глобальных переменных и т.д.

#### Побочные эффекты

Побочными эффектами (Side effects) - любые действия функции, не связанные с основным ее предназначением. Чтение / запись в глобальные переменные, изменение аргументов переданных по ссылке,  вывод информации в консоль и т.д. 

Идеальной с точки зрения программирования 

# PHP: Объектно-ориентированный дизайн

# Магические методы

## __invoke()

